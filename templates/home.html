{% extends 'base.html' %}

{% block title %}Inicio{% endblock %}

{% block content %}

<section id="home" class="d-block" style="position: relative; z-index: 2; padding-top: 120px !important; padding-bottom: 50px; min-height: auto !important;">
    
    <div class="container-fluid px-3 px-lg-5"> 
        
        <div class="matrix-container w-100 matrix-hero-box">

            <div class="row align-items-center">
                
                <div class="col-lg-4 text-center border-end-matrix mb-5 mb-lg-0">
                    <img src="{{ url_for('static', filename='img/perfil.jpg')}}" class="img-fluid rounded-circle mb-3 profile-pic" alt="Jose Cabezas" width="220" style="border: 4px solid #00FF41;">
                    <h1 class="display-4 fw-bold matrix-text-glow">Jos√© Cabezas Pulgar√≠n</h1>
                    <p class="matrix-role fs-5">SysAdmin | DevOps | Python | IA | Cybersecurity</p>
                    
                    <div class="mb-4 d-inline-flex align-items-center gap-2">
                        <a href="mailto:josecabezaspulgarin@gmail.com" class="matrix-email-link">
                            <span class="text-success me-1">></span> 
                            <i class="fas fa-envelope me-2"></i>josecabezaspulgarin@gmail.com
                        </a>
                    
                        <button class="matrix-copy-btn" onclick="copyEmailToClipboard()" title="Copiar al portapapeles">
                        <i class="fas fa-copy" id="copy-icon"></i>
                        </button>
                    </div>

                    <hr class="matrix-divider">

                    <div class="text-start mt-4 d-inline-block">
                        <h5 class="text-uppercase mb-3 text-center text-lg-start">Soft Skills:</h5>
                        <div class="text-center text-lg-start">
                            <span class="matrix-badge">üöÄ Flexibilidad</span>
                            <span class="matrix-badge">‚ö° Proactividad</span>
                            <span class="matrix-badge">üéØ Resoluci√≥n</span>
                            <span class="matrix-badge">ü§ù Trabajo en equipo</span>
                        </div>
                    </div>
                </div>

                <div class="col-lg-8 ps-lg-5">
                    <h3 class="mb-4 text-uppercase"><i class="fas fa-terminal me-2"></i> > whoami_</h3>
                    
                   <div class="lead" style="font-size: 1.1rem;">
                        <p>üîê  Administrador de Sistemas IT y Desarrollador Python con s√≥lida experiencia en la gesti√≥n de servidores Linux, an√°lisis de vulnerabilidades, logs y gesti√≥n de VPNs. Tras varios a√±os dedicados al soporte t√©cnico, helpdesk y mantenimiento de equipos, he avanzado hacia roles m√°s especializados en la administraci√≥n de infraestructuras y ciberseguridad. </p> 
                        <p>He complementado mi experiencia pr√°ctica con formaci√≥n especializada en Ciberseguridad y Desarrollo de software con Python orientado a Machine Learning y Big Data.</p>
                        <p>Actualmente, superviso y administro la infraestructura tecnol√≥gica y la seguridad de redes en entornos empresariales cr√≠ticos, asegurando la protecci√≥n, el rendimiento y la eficiencia de los sistemas, siempre en busca de optimizar procesos y mejorar la seguridad.</p>
                    </div>

                    <div class="mt-5 text-center">
                        <h4 class="mb-4 border-bottom-matrix d-inline-block px-3">Choose your reality</h4>
                        
                        <div class="d-flex justify-content-center gap-5 my-4 perspective-container">
                            <div class="pill-wrapper" onclick="filterStack('blue')">
                                <div class="pill blue-pill"></div>
                                <div class="pill-shadow"></div>
                                <span class="pill-label text-primary mt-2 d-block">DevOps & Dev</span>
                            </div>

                            <div class="pill-wrapper" onclick="filterStack('red')">
                                <div class="pill red-pill"></div>
                                <div class="pill-shadow"></div>
                                <span class="pill-label text-danger mt-2 d-block">Sistemas & Sec</span>
                            </div>
                        </div>

                        <p id="stack-status" class="small text-muted mb-4">> Waiting for input...</p>
                    </div>
                    
                    <div class="row text-center g-4 row-cols-3 row-cols-md-5 justify-content-center" id="tech-grid">
                        <div class="col tech-item" data-cat="red"><i class="devicon-linux-plain tech-icon"></i><br><small>Linux</small></div>
                        <div class="col tech-item" data-cat="red"><i class="devicon-amazonwebservices-plain-wordmark tech-icon" style="font-size: 2.5rem;"></i><br><small>AWS</small></div>
                        <div class="col tech-item" data-cat="red"><i class="fas fa-shield-halved tech-icon"></i><br><small>Security</small></div>
                        <div class="col tech-item" data-cat="red"><i class="fas fa-database tech-icon"></i><br><small>Big Data</small></div>

                        <div class="col tech-item" data-cat="blue"><i class="devicon-python-plain tech-icon"></i><br><small>Python</small></div>
                        <div class="col tech-item" data-cat="blue"><i class="devicon-django-plain tech-icon"></i><br><small>Django</small></div>
                        <div class="col tech-item" data-cat="blue"><i class="devicon-flask-original tech-icon"></i><br><small>Flask</small></div>
                        <div class="col tech-item" data-cat="blue"><i class="devicon-docker-plain tech-icon"></i><br><small>Docker</small></div>
                        <div class="col tech-item" data-cat="blue"><i class="devicon-jenkins-line tech-icon"></i><br><small>Jenkins</small></div>
                        <div class="col tech-item" data-cat="blue"><i class="devicon-gitlab-plain tech-icon"></i><br><small>GitLab</small></div>
                    </div>
                </div> 
            </div> 
            
            <hr class="matrix-divider my-5">

            <section id="terminal-section" class="py-4">
                <div class="row g-4">
                    <div class="col-lg-3 col-md-4">
                        <div class="matrix-card p-3 h-100" style="border: 1px solid #00FF41; background: rgba(0, 20, 0, 0.8);">
                            <h5 class="text-warning mb-3 typing-effect">> AVAILABLE_COMMANDS:</h5>
                            <div class="d-grid gap-2">
                                <button class="btn btn-matrix-command text-start" onclick="executeCommand('education')">
                                    <i class="fas fa-chevron-right me-2 small"></i>cat education.txt
                                </button>
                                <button class="btn btn-matrix-command text-start" onclick="executeCommand('capabilities')">
                                    <i class="fas fa-chevron-right me-2 small"></i>cat capabilities.json
                                </button>
                                <button class="btn btn-matrix-command text-start" onclick="executeCommand('career')">
                                    <i class="fas fa-chevron-right me-2 small"></i>tail -f career.log
                                </button>
                                <button class="btn btn-matrix-command text-start" onclick="executeCommand('projects')">
                                    <i class="fas fa-chevron-right me-2 small"></i>git remote show origin
                                </button>
                                <hr class="matrix-divider my-2">
                                <button class="btn btn-matrix-command text-start text-danger" onclick="clearTerminal()">
                                    <i class="fas fa-times me-2 small"></i>clear screen
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-9 col-md-8">
                        <div class="terminal-window h-100" style="border: 1px solid #00FF41; background: #000; padding: 20px; font-family: 'Share Tech Mono', monospace; height: 600px; overflow-y: auto; box-shadow: inset 0 0 20px rgba(0, 255, 65, 0.2);">
                            <div id="terminal-output">
                                <div class="terminal-line text-muted">Welcome to Jose Cabezas Portfolio Terminal v2.5.0</div>
                                <div class="terminal-line text-muted">Type a command or select one from the left panel to begin session...</div>
                                <div class="terminal-line mb-3">------------------------------------------------------------</div>
                            </div>
                            <div class="terminal-input-line d-flex">
                                <span class="text-success me-2">user@jose-portfolio:~$</span>
                                <span id="typed-command" class="text-white"></span>
                                <span class="blinking-cursor">_</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            </div> 
    </div>
</section>

<template id="tpl-education">
    <div class="terminal-block p-3 mb-3 mt-2" style="border-left: 3px solid #00FF41; background: rgba(0, 50, 0, 0.3);">
        <h3 class="mb-4 text-uppercase border-bottom-matrix pb-2">
            <i class="fas fa-graduation-cap me-2"></i> cat education.txt
        </h3>
        <div class="matrix-education">
            <div class="mb-3 terminal-reveal">
                <div class="d-flex justify-content-between">
                    <h6 class="text-white mb-0 fw-bold">DevOps & Software Dev</h6>
                    <span class="badge border border-success text-success bg-transparent">2025</span>
                </div>
                <small style="color: #00FF41; font-family: 'Share Tech Mono', monospace; text-shadow: 0 0 5px rgba(0, 255, 65, 0.5);">
                    > Lemoncoders Bootcamp
                </small>
            </div>
            <div class="mb-3 terminal-reveal" style="animation-delay: 0.2s;">
                <div class="d-flex justify-content-between">
                    <h6 class="text-white mb-0 fw-bold">M√°ster Ciberseguridad</h6>
                    <span class="badge border border-success text-success bg-transparent">2023</span>
                </div>
                <small style="color: #00FF41; font-family: 'Share Tech Mono', monospace; text-shadow: 0 0 5px rgba(0, 255, 65, 0.5);">
                    > EIP International Business School
                </small>
            </div>
            <div class="mb-3 terminal-reveal" style="animation-delay: 0.4s;">
                <div class="d-flex justify-content-between">
                    <h6 class="text-white mb-0 fw-bold">M√°ster Python & BigData</h6>
                    <span class="badge border border-success text-success bg-transparent">2022</span>
                </div>
                <small style="color: #00FF41; font-family: 'Share Tech Mono', monospace; text-shadow: 0 0 5px rgba(0, 255, 65, 0.5);">
                    > EIP International Business School
                </small>
            </div>
            <div class="mt-3 pt-3 border-top-matrix terminal-reveal" style="animation-delay: 0.6s;">
                <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-certificate text-warning me-2"></i> 
                    <small class="text-white ms-2">Ethical Hacking Essentials (EHE)</small>
                </div>
                <div class="d-flex align-items-center">
                    <i class="fas fa-university text-info me-2"></i> 
                    <small class="text-white ms-2">G.S. Admin Sistemas (ASIR)</small>
                </div>
            </div>
        </div>
    </div>
</template>

<template id="tpl-capabilities">
     <div class="terminal-block p-3 mb-3 mt-2" style="border-left: 3px solid #00FF41; background: rgba(0, 50, 0, 0.3);">
        <h3 class="mb-4 text-uppercase border-bottom-matrix pb-2">
            <i class="fas fa-microchip me-2"></i> cat capabilities.json
        </h3>
        <ul class="list-unstyled matrix-skills">
            <li class="mb-3 terminal-reveal">
                <strong class="text-white">> Desarrollo:</strong> 
                <span class="skill-tag">Python</span> <span class="skill-tag">Django</span> <span class="skill-tag">FastAPI</span> <span class="skill-tag">Pandas</span> <span class="skill-tag">Scikit-learn</span>
            </li>
            <li class="mb-3 terminal-reveal" style="animation-delay: 0.2s;">
                <strong class="text-white">> DevOps:</strong> 
                <span class="skill-tag">Docker</span> <span class="skill-tag">K8s</span> <span class="skill-tag">Jenkins</span> <span class="skill-tag">GitLab CI</span> <span class="skill-tag">AWS</span> <span class="skill-tag">Azure</span>
            </li>
            <li class="mb-3 terminal-reveal" style="animation-delay: 0.4s;">
                <strong class="text-white">> Ciberseguridad:</strong> 
                <span class="skill-tag">ISO 27001</span> <span class="skill-tag">Pentesting</span> <span class="skill-tag">Hardening</span> <span class="skill-tag">VPNs</span>
            </li>
            <li class="mb-3 terminal-reveal" style="animation-delay: 0.6s;">
                <strong class="text-white">> Monitoring:</strong> 
                <span class="skill-tag">Prometheus</span> <span class="skill-tag">Grafana</span> <span class="skill-tag">Loki</span> <span class="skill-tag">Jaeger</span>
            </li>
        </ul>
    </div>
</template>

<template id="tpl-career">
     <div class="terminal-block p-3 mb-3 mt-2" style="border-left: 3px solid #00FF41; background: rgba(0, 50, 0, 0.3);">
        <h3 class="mb-4 text-uppercase border-bottom-matrix pb-2">
            <i class="fas fa-history me-2"></i> tail -f career.log
        </h3>
        <div class="matrix-timeline">
             <div class="timeline-item mb-4 terminal-reveal">
                <div class="timeline-marker bg-success"></div>
                <div class="timeline-content ps-4">
                    <span class="badge border border-success text-success bg-transparent mb-2">[ 2023-07 - ACTUALIDAD ]</span>
                    <h5 class="text-white fw-bold mb-1">ADMINISTRADOR DE SISTEMAS</h5>
                    <small class="text-muted d-block mb-2">> AINCO CREACI√ìN DIGITAL S.L.</small>
                    <ul class="list-unstyled timeline-desc ps-3" style="border-left: 1px dashed #00FF41;">
                        <li class="mb-1">> Monitorizaci√≥n y mantenimiento servidores Linux.</li>
                        <li class="mb-1">> Despliegue de aplicaciones web.</li>
                        <li>> Soporte t√©cnico avanzado (Help Desk N2)</li>
                    </ul>
                </div>
            </div>
             <div class="timeline-item mb-4 terminal-reveal" style="animation-delay: 0.3s;">
                <div class="timeline-marker bg-success"></div>
                <div class="timeline-content ps-4">
                    <span class="badge border border-success text-success bg-transparent mb-2">[ 2017-05 - 2023-07 ]</span>
                    <h5 class="text-white fw-bold mb-1">MANTENIMIENTO IT</h5>
                    <small class="text-muted d-block mb-2">> VALCOMPON S.L</small>
                    <ul class="list-unstyled timeline-desc ps-3" style="border-left: 1px dashed #00FF41;">
                        <li class="mb-1">> Help Desk N2</li>
                        <li class="mb-1">> Mantenimiento de equipos inform√°ticos,</li>
                        <li class="mb-1">> Resoluci√≥n de incidencias log√≠sticas</li>
                        <li>> Coordinador de equipo t√©cnico</li>
                    </ul>
                </div>
            </div>
             <div class="timeline-item terminal-reveal" style="animation-delay: 0.6s;">
                <div class="timeline-marker bg-success"></div>
                <div class="timeline-content ps-4">
                    <span class="badge border border-success text-success bg-transparent mb-2">[ 2015-03 - 2015-06 ]</span>
                    <h5 class="text-white fw-bold mb-1">T√âCNICO DE SISTEMAS</h5>
                    <small class="text-muted d-block mb-2">> Fundaci√≥n FLUIC</small>
                    <ul class="list-unstyled timeline-desc ps-3" style="border-left: 1px dashed #00FF41;">
                        <li class="mb-1">> Mantenimiento y supervisi√≥n de equipos inform√°ticos.</li>
                        <li class="mb-1">> Resoluci√≥n de incidencias.</li>
                        <li class="mb-1">> Instalaci√≥n y actualizaci√≥n de software</li>
                        <li>> Tareas de administraci√≥n y monitorizaci√≥n</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</template>

<template id="tpl-projects">
     <div class="terminal-block p-3 mb-3 mt-2" style="border-left: 3px solid #00FF41; background: rgba(0, 50, 0, 0.3);">
         <h3 class="mb-4 text-uppercase border-bottom-matrix pb-2">
            <i class="fas fa-code-branch me-2"></i> git remote show origin
        </h3>
        <div class="row g-3">
            <div class="col-md-6 terminal-reveal">
                <div class="p-3 h-100" style="border: 1px solid #00FF41; background: rgba(0,0,0,0.5);">
                    <h6 class="text-white mb-2">
                        <i class="fas fa-folder me-2 text-success"></i> /src/python_ai/
                    </h6>
                    <ul class="list-unstyled ps-3 mb-0" style="font-size: 0.9rem;">
                        <li class="mb-2">
                            <a href="https://github.com/jornkbz/TFM-EIP" target="_blank" class="text-decoration-none text-success hover-link">
                                <i class="fab fa-git-alt me-2"></i> air_crash_calculator.git
                            </a>
                            <small class="d-block text-muted ps-4">> Predicci√≥n de accidentes (IA + BigData)</small>
                        </li>
                         <li class="mb-2">
                            <a href="https://aircrashcal.jose-cabezas.com/" target="_blank" class="text-decoration-none text-success hover-link">
                                <i class="fas fa-globe me-2"></i> air_crash_calculator-web
                            </a>
                            <small class="d-block text-muted ps-4">> Despliegue Live</small>
                        </li>
                    </ul>
                </div>
            </div>
             <div class="col-md-6 terminal-reveal" style="animation-delay: 0.2s;">
                 <div class="p-3 h-100" style="border: 1px solid #00FF41; background: rgba(0,0,0,0.5);">
                    <h6 class="text-white mb-2">
                        <i class="fas fa-folder me-2 text-success"></i> /src/django/
                    </h6>
                    <ul class="list-unstyled ps-3 mb-0" style="font-size: 0.9rem;">
                        <li class="mb-2">
                            <a href="https://github.com/jornkbz/ecommerce-django" target="_blank" class="text-decoration-none text-success hover-link">
                                <i class="fab fa-git-alt me-2"></i> django-ecommerce.git
                            </a>
                            <small class="d-block text-muted ps-4">> Plataforma de ventas</small>
                        </li>
                         <li class="mb-2">
                            <a href="https://neuraprint3d.com/" target="_blank" class="text-decoration-none text-success hover-link">
                                <i class="fas fa-globe me-2"></i> neuraprint3d-web
                            </a>
                            <small class="d-block text-muted ps-4">> Despliegue Live</small>
                        </li>
                    </ul>
                </div>
            </div>
             <div class="col-md-6 terminal-reveal" style="animation-delay: 0.4s;">
                <div class="p-3 h-100" style="border: 1px solid #00FF41; background: rgba(0,0,0,0.5);">
                    <h6 class="text-white mb-2">
                        <i class="fas fa-folder me-2 text-success"></i> /src/devops/
                    </h6>
                    <ul class="list-unstyled ps-3 mb-0" style="font-size: 0.9rem;">
                        <li class="mb-2">
                            <span class="text-success"><i class="fas fa-file-code me-2"></i> linux-scripts.sh</span>
                            <small class="d-block text-muted ps-4">> Automatizaci√≥n con Bash</small>
                        </li>
                        <li class="mb-2">
                             <span class="text-success"><i class="fab fa-docker me-2"></i> docker-compose.yml</span>
                            <small class="d-block text-muted ps-4">> Contenedores y microservicios</small>
                        </li>
                    </ul>
                </div>
            </div>
             <div class="col-md-6 terminal-reveal" style="animation-delay: 0.6s;">
                <div class="p-3 h-100" style="border: 1px solid #00FF41; background: rgba(0,0,0,0.5);">
                    <h6 class="text-white mb-2">
                        <i class="fas fa-folder me-2 text-success"></i> /src/security/
                    </h6>
                     <ul class="list-unstyled ps-3 mb-0" style="font-size: 0.9rem;">
                        <li class="mb-2">
                            <span class="text-success"><i class="fas fa-shield-alt me-2"></i> iso27001-sgsi/</span>
                            <small class="d-block text-muted ps-4">> Gesti√≥n de Seguridad (Compliance)</small>
                        </li>
                        <li class="mb-2">
                             <span class="text-success"><i class="fas fa-bug me-2"></i> vuln-scan-reports/</span>
                            <small class="d-block text-muted ps-4">> An√°lisis de vulnerabilidades</small>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    // 1. FILTRO DE PASTILLAS
    function filterStack(color) {
        const items = document.querySelectorAll('.tech-item');
        const statusText = document.getElementById('stack-status');
        const grid = document.getElementById('tech-grid');
        
        grid.style.opacity = '0'; 
        
        setTimeout(() => {
            items.forEach(item => {
                if (item.getAttribute('data-cat') === color) {
                    item.style.display = ''; 
                } else {
                    item.style.display = 'none';
                }
            });

            if (color === 'blue') {
                statusText.innerHTML = '> Reality accepted. Loading Development Environment...';
                statusText.style.color = '#00BFFF';
            } else {
                statusText.innerHTML = '> Breaking the simulation. Accessing Root Infrastructure...';
                statusText.style.color = '#FF4500';
            }
            
            grid.style.opacity = '1';
        }, 200);
    }


    // 2. FUNCI√ìN COPIAR EMAIL
    function copyEmailToClipboard() {
        const email = "josecabezaspulgarin@gmail.com";
        const icon = document.getElementById('copy-icon');

        navigator.clipboard.writeText(email).then(() => {
            icon.classList.remove('fa-copy');
            icon.classList.add('fa-check');
            
            setTimeout(() => {
                icon.classList.remove('fa-check');
                icon.classList.add('fa-copy');
            }, 2000);

        }).catch(err => {
            console.error('Error al copiar: ', err);
        });
    }

    // 3. TERMINAL INTERACTIVA
    const terminalOutput = document.getElementById('terminal-output');
    const typedCommandSpan = document.getElementById('typed-command');
    const terminalWindow = document.querySelector('.terminal-window');

    const commandMap = {
        'education': { cmd: 'cat education.txt', tplId: 'tpl-education' },
        'capabilities': { cmd: 'cat capabilities.json', tplId: 'tpl-capabilities' },
        'career': { cmd: 'tail -f career.log', tplId: 'tpl-career' },
        'projects': { cmd: 'git remote show origin', tplId: 'tpl-projects' }
    };

    let isExecuting = false;

    function executeCommand(commandKey) {
        if (isExecuting) return; 
        isExecuting = true;

        const commandData = commandMap[commandKey];
        const commandText = commandData.cmd;
        const templateId = commandData.tplId;

        let i = 0;
        typedCommandSpan.textContent = '';
        const typeInterval = setInterval(() => {
            if (i < commandText.length) {
                typedCommandSpan.textContent += commandText.charAt(i);
                i++;
            } else {
                clearInterval(typeInterval);
                setTimeout(() => processCommandOutput(commandText, templateId), 500);
            }
        }, 50); 
    }

    function processCommandOutput(commandText, templateId) {
        const previousPrompt = document.createElement('div');
        previousPrompt.innerHTML = `<span class="text-success me-2">user@jose-portfolio:~$</span><span class="text-white">${commandText}</span>`;
        terminalOutput.appendChild(previousPrompt);

        typedCommandSpan.textContent = '';

        const template = document.getElementById(templateId);
        // Comprobaci√≥n de seguridad por si el template no existe
        if(template) {
            const clone = template.content.cloneNode(true);
            terminalOutput.appendChild(clone);
        }

        terminalWindow.scrollTop = terminalWindow.scrollHeight;
        isExecuting = false;
    }

    function clearTerminal() {
        terminalOutput.innerHTML = '';
        terminalOutput.innerHTML = '<div class="terminal-line text-muted">Terminal cleared. Session reset.</div><div class="terminal-line mb-3">------------------------------------------------------------</div>';
    }
</script>

{% endblock %}